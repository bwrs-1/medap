# リリース手順 v0.1 - AltStore配布

## 前提条件
- ✅ Xcodeでビルド可能なiOSプロジェクト
- ✅ Apple ID（無料アカウントでOK）
- ✅ AltStore/SideStoreがインストール済みのiOS端末

---

## 1. 署名証明書の準備

### 1.1 Xcodeで署名設定
1. Xcodeでプロジェクトを開く
2. **Signing & Capabilities**タブを選択
3. **Automatically manage signing**にチェック
4. **Team**で個人のApple IDを選択
5. **Bundle Identifier**を一意の値に設定（例: `com.yourname.medaka`）

### 1.2 確認事項
- [ ] 署名エラーが出ていないか確認
- [ ] Provisioning Profileが自動生成されているか確認

---

## 2. IPAファイルの作成

### 2.1 アーカイブ作成
1. Xcodeメニュー: **Product > Archive**
2. ビルド完了を待つ（数分）
3. Organizerウィンドウが開く

### 2.2 IPAエクスポート
1. アーカイブを選択し、**Distribute App**をクリック
2. **Development**を選択
3. **Export**を選択
4. 保存先を指定（例: `~/Desktop/medaka.ipa`）

### 2.3 確認事項
- [ ] IPAファイルが生成されているか確認
- [ ] ファイルサイズが異常に小さくないか確認（目安: 10MB以上）

---

## 3. AltStoreでインストール

### 3.1 AltStoreの場合
1. PCとiOS端末を同じWi-Fiに接続
2. PC側でAltServerを起動
3. iOS端末でAltStoreアプリを開く
4. **My Apps**タブで「+」ボタンをタップ
5. 作成したIPAファイルを選択
6. インストール完了を待つ（数分）

### 3.2 SideStoreの場合
1. iOS端末でSideStoreアプリを開く
2. **Apps**タブで「+」ボタンをタップ
3. IPAファイルを選択（AirDrop/Files経由）
4. インストール完了を待つ

### 3.3 確認事項
- [ ] ホーム画面にアプリアイコンが表示されているか
- [ ] タップして起動できるか
- [ ] 「信頼されていない開発元」エラーが出た場合は、設定 > 一般 > VPNとデバイス管理で証明書を信頼

---

## 4. 動作確認チェックリスト

### 4.1 基本動作
- [ ] アプリが起動する
- [ ] ログイン画面が表示される
- [ ] Google OAuthでログインできる

### 4.2 品種機能
- [ ] 品種一覧が表示される
- [ ] 検索が動作する
- [ ] 品種詳細が表示される
- [ ] 品種を追加できる（Editor以上）

### 4.3 容器機能
- [ ] 容器一覧が表示される
- [ ] 容器を作成できる
- [ ] 品種を紐付けできる
- [ ] 個体数を更新できる

### 4.4 権限
- [ ] Viewerは編集ボタンが表示されない
- [ ] Editorは品種・容器を編集できる
- [ ] Adminは監査ログを閲覧できる

### 4.5 オフライン
- [ ] 機内モードでも前回取得データが表示される

---

## 5. 配布方法

### 5.1 個人利用（推奨）
- AltStore/SideStoreで自分の端末にインストール
- 7日ごとに再署名が必要（AltStoreが自動実行）

### 5.2 テスター配布
- IPAファイルをAirDrop/メールで共有
- テスターも各自のApple IDで署名してインストール

### 5.3 公開配布（要確認）
- **要確認**: AltStore Sourceとして公開する場合の手順
- **要確認**: TestFlightは使えるか？（Apple Developer Program必要）

---

## 6. トラブルシューティング

### 6.1 「信頼されていない開発元」エラー
**対処法**:
1. 設定 > 一般 > VPNとデバイス管理
2. 自分のApple IDを選択
3. 「信頼」をタップ

### 6.2 「アプリが開けません」エラー
**対処法**:
1. AltStore/SideStoreでアプリを削除
2. 再度IPAをインストール
3. 署名証明書の有効期限を確認（7日間）

### 6.3 ビルドエラー
**対処法**:
1. Xcodeで**Clean Build Folder**（Cmd+Shift+K）
2. Derived Dataを削除
3. 再度Archive

---

## 7. 更新手順

### 7.1 アプリ更新時
1. Xcodeでバージョン番号を上げる（例: 1.0.0 → 1.0.1）
2. 上記手順2-3を繰り返してIPAを再作成
3. AltStore/SideStoreで既存アプリを削除
4. 新しいIPAをインストール

### 7.2 自動更新（要確認）
- **要確認**: AltStore Sourceで自動更新を提供する方法

---

## 要確認リスト（配布関連）

1. **AltStore Source公開手順**: JSONファイル作成・ホスティング方法
2. **TestFlight利用可否**: Apple Developer Program（年99ドル）が必要か確認
3. **署名証明書の有効期限**: 無料Apple IDは7日間だが、有料アカウントなら1年間か？
4. **複数端末配布**: 同じIPAを複数人が使えるか？（各自署名が必要？）

---

**作成日**: 2026-01-08  
**バージョン**: 0.1  
**次回更新**: 初回リリース後
